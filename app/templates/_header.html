<header>
    <div class="logo" tabindex="0" aria-label="Orumba North Logo">
        <img src="/static/images/orumba-north-logo.jpg" alt="Orumba North Logo" style="height: 120px; width: 120px; border-radius: 50%; vertical-align: middle; margin-right: 12px; object-fit: cover;" />
        Orumba North
    </div>
    <button class="hamburger" aria-label="Toggle navigation menu" aria-expanded="false" aria-controls="nav-menu" onclick="toggleMenu()">
        <svg width="30" height="30" viewBox="0 0 100 80" fill="#ffdd57" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
            <rect width="100" height="15"></rect>
            <rect y="30" width="100" height="15"></rect>
            <rect y="60" width="100" height="15"></rect>
        </svg>
    </button>
    <nav id="nav-menu" aria-label="Primary navigation" class="nav-menu">
        <ul id="nav-list">
            <li><a href="#hero" onclick="closeMenu()">Home</a></li>
            <li><a href="#features" onclick="closeMenu()">Features</a></li>
            <li><a href="#about" onclick="closeMenu()">About</a></li>
            <li><a href="#contact" onclick="closeMenu()">Contact</a></li>
            <li><a href="/news-hub" onclick="closeMenu()">News Hub</a></li>
            <li><a href="/history" onclick="closeMenu()">History</a></li>
            <!-- Gallery link removed -->
            <li id="nav-create-post" style="display:none;"><a href="/create-post" onclick="closeMenu()">Create Post</a></li>
            <!-- Removed always visible Create Album link -->
            <li id="nav-create-album" style="display:none;"><a href="/create-album" onclick="closeMenu()">Create Album</a></li>
            <li><a href="/gallery" onclick="closeMenu()">Gallery</a></li>
            <li><a href="/members" onclick="closeMenu()">Members</a></li>
            <li id="nav-login"><a href="/login" onclick="closeMenu()">Login</a></li>
            <li id="nav-register"><a href="/register" onclick="closeMenu()">Register</a></li>
            <li id="nav-logout" style="display:none;"><a href="#" onclick="logout(); return false;">Logout</a></li>
        </ul>
    </nav>
</header>
<script>
    // Hamburger menu toggle
    function toggleMenu() {
        const nav = document.getElementById('nav-menu');
        nav.classList.toggle('active');
    }
    // Close menu when clicking a link (for better UX)
    function closeMenu() {
        const nav = document.getElementById('nav-menu');
        nav.classList.remove('active');
    }
            async function checkAuth() {
                try {
                    const response = await fetch('/api/check-auth');
                    const data = await response.json();
                    if (data.authenticated) {
                        document.getElementById('nav-create-post').style.display = 'list-item';
                        document.getElementById('nav-create-album').style.display = 'list-item';
                        document.getElementById('nav-login').style.display = 'none';
                        document.getElementById('nav-register').style.display = 'none';
                        document.getElementById('nav-logout').style.display = 'list-item';
                    } else {
                        document.getElementById('nav-create-post').style.display = 'none';
                        document.getElementById('nav-create-album').style.display = 'none';
                        document.getElementById('nav-login').style.display = 'list-item';
                        document.getElementById('nav-register').style.display = 'list-item';
                        document.getElementById('nav-logout').style.display = 'none';
                    }
                } catch (error) {
                    console.error('Error checking auth status:', error);
                }
            }
    async function logout() {
        try {
            const response = await fetch('/api/logout', { method: 'POST' });
            const data = await response.json();
            if (data.status === 'success') {
                window.location.href = '/';
            } else {
                alert('Logout failed.');
            }
        } catch (error) {
            alert('An error occurred during logout.');
        }
    }
    window.addEventListener('DOMContentLoaded', checkAuth);
</script>
